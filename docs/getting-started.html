<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Get started with Weather Alert Backend: token setup, first criteria payload, filters, and current/forecast condition checks."
    />
    <title>Weather Alert Hub | Getting Started</title>
    <link rel="stylesheet" href="./assets/styles.css" />
    <script defer src="./assets/site.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container nav-shell">
        <a class="brand" href="./index.html">
          <span class="brand-dot" aria-hidden="true"></span>
          Weather Alert Hub
        </a>
        <button class="menu-toggle" data-menu-toggle aria-expanded="false" aria-controls="site-nav">Menu</button>
        <nav id="site-nav" class="site-nav" aria-label="Main Navigation">
          <a data-nav href="./index.html">Home</a>
          <a data-nav href="./getting-started.html">Getting Started</a>
          <a data-nav href="./use-alerts.html">Use Alerts</a>
          <a data-nav href="./api-reference.html">API Reference</a>
          <a data-nav href="./faq.html">FAQ</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="container hero-grid">
          <div class="reveal">
            <p class="kicker">Quick setup</p>
            <h1>First complete criteria flow in under 10 minutes</h1>
            <p class="lead">Use this checklist to go from JWT token to condition-based alerts (current + forecast).</p>
          </div>
          <aside class="panel reveal">
            <h2>What you need</h2>
            <p><span class="inline-code">Base URL</span>: <span class="inline-code">http://localhost:8080</span> (or your hosted API URL)</p>
            <p><span class="inline-code">Credentials</span>: issued by your app team/admin</p>
            <p><span class="inline-code">Role</span>: <span class="badge badge-user">USER</span> for reads, <span class="badge badge-admin">ADMIN</span> for criteria writes</p>
          </aside>
        </div>
      </section>

      <section class="section">
        <div class="container">
          <div class="card reveal">
            <h2>1. Request your JWT token</h2>
            <pre class="code"><code>curl -X POST "http://localhost:8080/api/auth/token" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "your-username",
    "password": "your-password"
  }'</code></pre>
            <p>Store <span class="inline-code">accessToken</span> from the response and send it as a bearer token.</p>
          </div>
        </div>
      </section>

      <section class="section">
        <div class="container grid-2">
          <article class="card reveal">
            <h2>2. Create criteria (ADMIN)</h2>
            <pre class="code"><code>curl -X POST "http://localhost:8080/api/criteria" \
  -H "Authorization: Bearer ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "user123",
    "location": "Orlando",
    "latitude": 28.5383,
    "longitude": -81.3792,
    "temperatureThreshold": 60,
    "temperatureDirection": "BELOW",
    "temperatureUnit": "F",
    "rainThreshold": 40,
    "rainThresholdType": "PROBABILITY",
    "monitorCurrent": true,
    "monitorForecast": true,
    "forecastWindowHours": 48,
    "oncePerEvent": true,
    "rearmWindowMinutes": 120
  }'</code></pre>
            <p class="small">If the criteria is already true at creation time, alert generation can happen immediately.</p>
          </article>

          <article class="card reveal">
            <h2>3. Verify criteria with filters</h2>
            <pre class="code"><code>curl "http://localhost:8080/api/criteria/user/user123?temperatureUnit=F&hasRainRule=true&monitorForecast=true" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"</code></pre>
            <p>Optional filters: <span class="inline-code">temperatureUnit</span>, <span class="inline-code">monitorCurrent</span>, <span class="inline-code">monitorForecast</span>, <span class="inline-code">enabled</span>, <span class="inline-code">hasTemperatureRule</span>, <span class="inline-code">hasRainRule</span>.</p>
          </article>
        </div>
      </section>

      <section class="section">
        <div class="container grid-2">
          <article class="card reveal">
            <h2>4. Inspect current/forecast conditions</h2>
            <pre class="code"><code>curl "http://localhost:8080/api/weather/conditions/current?latitude=28.5383&longitude=-81.3792" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"

curl "http://localhost:8080/api/weather/conditions/forecast?latitude=28.5383&longitude=-81.3792&hours=48" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"</code></pre>
            <p>Forecast window range is <span class="inline-code">1..168</span> hours. Default is 48.</p>
          </article>

          <article class="card reveal">
            <h2>5. Read and manage alerts</h2>
            <pre class="code"><code>GET /api/alerts/user/{userId}
GET /api/alerts/criteria/{criteriaId}/history
POST /api/alerts/{alertId}/acknowledge
POST /api/alerts/{alertId}/expire   # ADMIN</code></pre>
            <p>Alerts include lifecycle fields and dedupe metadata such as <span class="inline-code">eventKey</span> and <span class="inline-code">reason</span>.</p>
          </article>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container small">
        Need route-level permissions and full list? Open API Reference. <span data-year></span>
      </div>
    </footer>
  </body>
</html>
