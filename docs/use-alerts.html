<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Daily usage guide for Weather Alert Backend users: criteria lifecycle, anti-spam behavior, and current/forecast weather checks."
    />
    <title>Weather Alert Hub | Use Alerts</title>
    <link rel="stylesheet" href="./assets/styles.css" />
    <script defer src="./assets/site.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container nav-shell">
        <a class="brand" href="./index.html">
          <span class="brand-dot" aria-hidden="true"></span>
          Weather Alert Hub
        </a>
        <button class="menu-toggle" data-menu-toggle aria-expanded="false" aria-controls="site-nav">Menu</button>
        <nav id="site-nav" class="site-nav" aria-label="Main Navigation">
          <a data-nav href="./index.html">Home</a>
          <a data-nav href="./getting-started.html">Getting Started</a>
          <a data-nav href="./use-alerts.html">Use Alerts</a>
          <a data-nav href="./api-reference.html">API Reference</a>
          <a data-nav href="./faq.html">FAQ</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="container hero-grid">
          <div class="reveal">
            <p class="kicker">Daily workflow</p>
            <h1>Operate alerts with predictable lifecycle and cadence.</h1>
            <p class="lead">
              Use these patterns for routine monitoring, triage, and criteria tuning across current and forecast weather
              conditions.
            </p>
          </div>
          <aside class="panel reveal">
            <h2>Core behavior</h2>
            <ol class="step-list">
              <li>Scheduler evaluates every 5 minutes.</li>
              <li>Edge-trigger logic avoids duplicates while conditions remain true.</li>
              <li>Condition clears and re-occurs can trigger a new alert event.</li>
            </ol>
          </aside>
        </div>
      </section>

      <section class="section">
        <div class="container grid-2">
          <article class="card reveal">
            <h2>User alert feed</h2>
            <pre class="code"><code>GET /api/alerts/user/{userId}
GET /api/alerts/{alertId}
GET /api/alerts/criteria/{criteriaId}/history</code></pre>
            <p>
              Alert responses include <span class="inline-code">eventKey</span>, <span class="inline-code">reason</span>,
              <span class="inline-code">conditionSource</span>, and lifecycle timestamps
              (<span class="inline-code">sentAt</span>, <span class="inline-code">acknowledgedAt</span>, <span class="inline-code">expiredAt</span>).
            </p>
          </article>

          <article class="card reveal">
            <h2>Alert lifecycle actions</h2>
            <pre class="code"><code>POST /api/alerts/{alertId}/acknowledge
POST /api/alerts/{alertId}/expire   # ADMIN</code></pre>
            <p>Use acknowledge for user-facing resolution and expire for admin cleanup/operational control.</p>
          </article>
        </div>
      </section>

      <section class="section">
        <div class="container grid-3">
          <article class="card reveal">
            <h3>Current conditions</h3>
            <pre class="code"><code>GET /api/weather/conditions/current?latitude={lat}&longitude={lon}</code></pre>
            <p>Latest NOAA observation model for coordinate-based checks.</p>
          </article>

          <article class="card reveal">
            <h3>Forecast window</h3>
            <pre class="code"><code>GET /api/weather/conditions/forecast?latitude={lat}&longitude={lon}&hours=48</code></pre>
            <p>Hourly forecast periods in a configurable horizon (1 to 168 hours).</p>
          </article>

          <article class="card reveal">
            <h3>Active alert snapshot</h3>
            <pre class="code"><code>GET /api/weather/active?page=0&size=50</code></pre>
            <p>Paginated read model of active NOAA weather alerts.</p>
          </article>
        </div>
      </section>

      <section class="section">
        <div class="container grid-2">
          <article class="card reveal">
            <h2>Criteria tuning pattern (ADMIN)</h2>
            <ol class="step-list">
              <li>Create or update criteria thresholds and monitoring flags.</li>
              <li>Set <span class="inline-code">oncePerEvent</span> and <span class="inline-code">rearmWindowMinutes</span> for cadence control.</li>
              <li>Verify with criteria filters and alert history.</li>
            </ol>
            <p class="small">Criteria create triggers an immediate evaluation, so already-true conditions can notify right away.</p>
          </article>

          <article class="card reveal">
            <h2>Real-time push stream</h2>
            <pre class="code"><code>CONNECT ws://localhost:8080/ws-alerts
SUBSCRIBE /topic/alerts/{userId}</code></pre>
            <p>Use WebSocket subscriptions when you want push-style user updates instead of polling.</p>
          </article>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container small">
        Daily operations guide for criteria, alerts, and lifecycle handling. <span data-year></span>
      </div>
    </footer>
  </body>
</html>
