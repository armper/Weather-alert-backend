<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Frequently asked questions for Weather Alert Backend users and integrators." />
    <title>Weather Alert Hub | FAQ</title>
    <link rel="stylesheet" href="./assets/styles.css" />
    <script defer src="./assets/site.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container nav-shell">
        <a class="brand" href="./index.html">
          <span class="brand-dot" aria-hidden="true"></span>
          Weather Alert Hub
        </a>
        <button class="menu-toggle" data-menu-toggle aria-expanded="false" aria-controls="site-nav">Menu</button>
        <nav id="site-nav" class="site-nav" aria-label="Main Navigation">
          <a data-nav href="./index.html">Home</a>
          <a data-nav href="./getting-started.html">Getting Started</a>
          <a data-nav href="./use-alerts.html">Use Alerts</a>
          <a data-nav href="./api-reference.html">API Reference</a>
          <a data-nav href="./faq.html">FAQ</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="container hero-grid">
          <div class="reveal">
            <p class="kicker">Support answers</p>
            <h1>Frequently asked questions</h1>
            <p class="lead">Common questions about criteria behavior, alert lifecycle, and role-based endpoint access.</p>
          </div>
          <aside class="panel reveal">
            <h2>Quick checks</h2>
            <ol class="step-list">
              <li>Confirm token validity and role scope.</li>
              <li>Verify criteria coordinates when using condition thresholds.</li>
              <li>Check scheduler cadence expectations (5-minute cycle).</li>
            </ol>
          </aside>
        </div>
      </section>

      <section class="section">
        <div class="container grid-2">
          <article class="card reveal">
            <h2>Why do I get 401 Unauthorized?</h2>
            <p>Your bearer token is missing, malformed, or expired. Request a fresh token from <span class="inline-code">/api/auth/token</span>.</p>
          </article>

          <article class="card reveal">
            <h2>Why do I get 403 Forbidden?</h2>
            <p>You are calling an admin-only route. Criteria writes, pending alerts, and alert expire require <span class="badge badge-admin">ADMIN</span>.</p>
          </article>

          <article class="card reveal">
            <h2>Why did a criteria alert immediately after creation?</h2>
            <p>New criteria are evaluated right away. If conditions are already met, the system can generate an alert immediately.</p>
          </article>

          <article class="card reveal">
            <h2>Why am I not getting repeated alerts every cycle?</h2>
            <p>
              Anti-spam behavior is edge-triggered. When a condition stays true, duplicates are suppressed. A new alert can fire after a
              clear-and-reoccur transition or when event signature/cooldown rules allow it.
            </p>
          </article>

          <article class="card reveal">
            <h2>Can I monitor only forecast or only current conditions?</h2>
            <p>Yes. Configure <span class="inline-code">monitorCurrent</span> and <span class="inline-code">monitorForecast</span> in criteria. At least one must be true.</p>
          </article>

          <article class="card reveal">
            <h2>What is the default forecast lookahead window?</h2>
            <p>Default is 48 hours. Criteria can override this with <span class="inline-code">forecastWindowHours</span> from 1 to 168.</p>
          </article>

          <article class="card reveal">
            <h2>Why might conditions be temporarily unavailable?</h2>
            <p>
              NOAA outage guard can short-circuit requests after repeated failures. During this window evaluations become unavailable and
              state transitions are skipped to prevent false clears/rearms.
            </p>
          </article>

          <article class="card reveal">
            <h2>Where can I explore endpoints interactively?</h2>
            <p>Use Swagger UI at <span class="inline-code">/swagger-ui/index.html</span> when the backend is running.</p>
          </article>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container small">
        Weather Alert Backend FAQ (criteria + lifecycle behavior). <span data-year></span>
      </div>
    </footer>
  </body>
</html>
